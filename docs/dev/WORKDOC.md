# 工作日志
用来整理思路，确定开发方向。前期进行了大量开发，而且也在大家的帮助下进行了很多测试。
但我发现，面向问题开发的好处是每次都可以碎片式开发，但这毕竟不是最好的开发方式。
我重新捡起来我的面向文档开发。从自身代码优化起。这种开发的好处是能搭建完善的系统。

## 阶段目标：把palyer不同函数，拆分到不同文件
- [x] 完成，这样清晰了很多

## 目标：实现知道当前降低修为的原因
本质上来说，是希望知道用户当前的状态，因而，给player带两个参数，
1. 输出台参数
2. 当前执行的事件参数（所有事件由common下一个静态常量类维护）
现在，每个函数执行前所作的第一个事件就是改变当前用户的触发事件。
目标，大部分函数传参之间，应该只需要传递player类即可
- [x] 增加了记录玩家事件系统，目前此部分已经实现，已经实现
## 目标：完善物品体系，做到什么物品都可以添加
1. 物品分为，所有物品（所有物品均可用、发生持续作用的统一归为装备）、CBAS物品。
2. 抽奖、使用进行区分，对外只暴露方法，不暴露内容

## 修复ydoc，更好的记录和展示物品
- [x] npm\下载慢改用cnpm（看起来，国内镜像是解决很多网速问题的统一方案）

## 商店不再出现重复商品
- [x] 商店逻辑，优化完成，商店目前没有必要做一个存储数据写入数据库。

## 测试
测试之前开发的所有。物品，以及商店。
1. 签到（没有问题）
2. 商店（未初始化）（修改了一下文字）
3. 多线程的问题，仅仅展示用多线程展示


## 梳理所有handle相关处理逻辑
让handle本身不处理主要逻辑，只处理错误，以及符合预期的话，就传入主要逻辑（交给具体事件去执行）
美化一下这个部分逻辑
战力翻倍
只需要再每个事件设置的时候，大事件，小事件，同时触发触发器即可
object可以用中介，也可以每次自己传入，为了放置误操作，自己传入更好。还可以不用更改原来代码体系
离开时清除事件状态
同时关于是否，继续，可以用continue属性来（默认是true，除非一些地方修改为fasle，然后执行了一次之后，立即改为true）

## 对整个内容，绘制一个流程图（使用plantUML）
为了任务，还是避免不熟悉的东西，这儿就直接使用processon，来保证更多可操纵性。

直接用纸和笔也不错。（最终发现还是软件更快）

## 纵览所有，插入时点机制
在需要的时候，应该还是面向物品机制开发。

## 消息对话机制
可以设置一个变量。然后再发起一个问题等待回答。
1. 使用物品，发起一个问题（我们最希望的是选了选项之后一定时间之内回答，马上可以看到答复，所以最好还是用事件异步去绑定） 问答机制相当于做好了，不只是可以处理数字选项，最好还是设置数字选项 文字选项也可以
2. 

一个问题，关机后？（或者死机后，那些宝物怎么办。。。每次重新打开的时候，事件要重新绑定）
本质上来说，就是一个通知问题。如果设置了很多参数（例如暴击率，战斗速率，修为获取速率，那么，修为补充和额外获得就不需要用这样一种附加的方法来做了）

一种是用时间来做自动取消，一种是通知取消

其实很多都是开关，可以设置一个开关类。